{% extends 'base.html' %}
{% load static %}

{% block content %}
<main id="content">
    <header id="index-header">
        <div id="login-out-container">
            {% if user.is_authenticated %}
                <a href="{% url 'logout' %}" class="login-out">Logout</a>
            {% else %}
                <a href="{% url 'login' %}" class="login-out">Login</a>
            {% endif %}
        </div>
    </header>

    <div class="calendar-container">
        <div id="calendar">
            <div id="calendar-month">
                <div id="month-container">
                    <h2 id="month"></h2>
                </div>
            </div>
            <div id="calendar-week" translate="no">
                <div class="week-day"><h3>Mo</h3></div>
                <div class="week-day"><h3>Tu</h3></div>
                <div class="week-day"><h3>We</h3></div>
                <div class="week-day"><h3>Th</h3></div>
                <div class="week-day"><h3>Fr</h3></div>
                <div class="week-day"><h3>Sa</h3></div>
                <div class="week-day"><h3>Su</h3></div>
            </div>
            <main id="calendar-main">
            </main>
        </div>

        <div id="appointments">
            <div id="appointments-list">
                {% for appointment in appointments %}
                    <div>
                        <a href="http://127.0.0.1:8000/appointment/edit/{{ appointment.id }}/">{{ appointment }}</a>
                    </div>
                {% endfor %}
            </div>
            <div id="appointments-buttons">
                <a href="{%  url 'appointment-create' %}" class="appointment-button button" id="appointment-add">+</a>
                <a class="appointment-button button" id="appointment-edit">#</a>
                <a class="appointment-button button" id="appointment-delete">-</a>
            </div>
        </div>
    </div>


    <footer id="index-footer">
        <div id="school-links-container" translate="no">
            <a href="https://schueler.bulme.at/" class="school-link">Sch√ºler Webmail</a>
            <a href="https://urania.webuntis.com/WebUntis/?school=bulme#/basic/login" class="school-link">WebUntis</a>
            <a href="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=10b93a39-ac0f-471c-94d9-b770f26053af&response_type=code&redirect_uri=https%3A%2F%2Fwww.eduvidual.at%2Fadmin%2Foauth2callback.php&state=%2Fauth%2Foauth2%2Flogin.php%3Fwantsurl%3Dhttps%253A%252F%252Fwww.eduvidual.at%252F%26sesskey%3DibW9Iv4vQf%26id%3D1&scope=openid%20profile%20email%20user.read&prompt=select_account&sso_reload=true" class="school-link">Eduvidual</a>
            <a href="https://digi4school.at/" class="school-link">Digi4School</a>
            <a href="https://www.bulme.at/index.php/schule/lehrkoerper/lehrerinn" class="school-link">Teacher</a>
        </div>
    </footer>
</main>

    <script src="{% static 'js/calendar.js' %}"></script>

    <script>
        let appointment_view = document.getElementById('sidenavbar');
        let calendar_box = document.getElementById('calendar')

        let currentURL = "http://127.0.0.1:8000";
        let counter = 0;

        let urlparts = window.location.href;
        let urlsplit = urlparts.split("/");
        function ShowAppointment(i, month, year) {
            redirectAppointments(i, month+1, year);
        }


        console.log(document.getElementById("appointments"));
        console.log(window.location.href);

        if (!window.location.href.endsWith("http://127.0.0.1:8000") && !window.location.href.endsWith("http://127.0.0.1:8000/")) {
            console.log("here - if")
            document.getElementById('appointments').style.display = "unset";
        }
    </script>
{% endblock %}