{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div id="sidenavbar">
        <div id="appointments">
            <div id="appointments-list">
                {% for appointment in appointments %}
                    <div>
                        {{ appointment }}
                    </div>
                {% endfor %}
            </div>
            <div id="appointments-buttons">
                <a href="{%  url 'appointment-create' %}" class="appointment-button button" id="appointment-add">+</a>
                <a class="appointment-button button" id="appointment-edit">#</a>
                <a class="appointment-button button" id="appointment-delete">-</a>
            </div>
        </div>
    </div>

<main id="content">
    <header id="index-header">
        <div id="login-out-container">
            {% if user.is_authenticated %}
                <a href="{% url 'logout' %}" class="login-out">Logout</a>
            {% else %}
                <a href="{% url 'login' %}" class="login-out">Login</a>
            {% endif %}
        </div>
    </header>
    <div id="calendar">
        <div id="calendar-month">
            <div id="month-container">
                <h2 id="month"></h2>
            </div>
        </div>
        <div id="calendar-week" translate="no">
            <div class="week-day"><h3>Mo</h3></div>
            <div class="week-day"><h3>Tu</h3></div>
            <div class="week-day"><h3>We</h3></div>
            <div class="week-day"><h3>Th</h3></div>
            <div class="week-day"><h3>Fr</h3></div>
            <div class="week-day"><h3>Sa</h3></div>
            <div class="week-day"><h3>Su</h3></div>
        </div>
        <main id="calendar-main">
        </main>
    </div>

    <footer id="index-footer">
        <div id="school-links-container" translate="no">
            <a href="https://schueler.bulme.at/" class="school-link">Sch√ºler Webmail</a>
            <a href="https://urania.webuntis.com/WebUntis/?school=bulme#/basic/login" class="school-link">WebUntis</a>
            <a href="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=10b93a39-ac0f-471c-94d9-b770f26053af&response_type=code&redirect_uri=https%3A%2F%2Fwww.eduvidual.at%2Fadmin%2Foauth2callback.php&state=%2Fauth%2Foauth2%2Flogin.php%3Fwantsurl%3Dhttps%253A%252F%252Fwww.eduvidual.at%252F%26sesskey%3DibW9Iv4vQf%26id%3D1&scope=openid%20profile%20email%20user.read&prompt=select_account&sso_reload=true" class="school-link">Eduvidual</a>
            <a href="https://digi4school.at/" class="school-link">Digi4School</a>
            <a href="https://www.bulme.at/index.php/schule/lehrkoerper/lehrerinn" class="school-link">Teacher</a>
        </div>
    </footer>
</main>

    <script src="{% static 'js/calendar.js' %}"></script>

    <script>
        let appointment_view = document.getElementById('sidenavbar');
        let calendar_box = document.getElementById('calendar')
        appointment_view.style.visibility = 'hidden';

        let counter = 0;
        function ShowAppointment(i) {
            if (counter === 0) {
                calendar_box.style.position = 'relative';
                calendar_box.style.transition = 'right 0.7s';
                calendar_box.style.right = '0';


                setTimeout(function() { //time for browser to set new init values
                    appointment_view.style.visibility = 'visible';
                    calendar_box.style.right = '12vw';
                }, 10); //


                appointment_view.style.backgroundColor = 'var(--background)';
                button = document.getElementById(i);
                button.classList.add('highlighted');
                counter = 1;
            } else {
                appointment_view.style.visibility = 'hidden';
                button.classList.remove('highlighted');

                calendar_box.style.right = '0';

                counter = 0;
            }

        }
    </script>
{% endblock %}